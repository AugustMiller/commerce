{% set steps = [
    {
        label: "Email",
        url: 'shop/checkout/email'
    },
    {
        label: "Account",
        url: 'shop/checkout/register-signin'
    },
    {
        label: "Address",
        url: 'shop/checkout/addresses'
    },
    {
        label: "Shipping",
        url: 'shop/checkout/shipping'
    },
    {
        label: "Payment",
        url: 'shop/checkout/payment'
    }
] %}

{% if width is not defined %}
    {% set width = 0 %}
{% endif %}

{% if currentOrNext is not defined %}
  {% set currentOrNext = false %}
{% endif %}

<nav class="container mx-auto justify-between items-center p-6 text-center">
    <nav class="flex bg-gray-200 rounded p-2">
        {% for step in steps %}
            {% set totalSteps = steps|length %}
            {% if craft.app.request.pathInfo == step.url %}
                {% set currentOrNext = true %}
                {% set width = ((loop.index) * 100 / totalSteps - 10 ) %}
            {% endif %}
            <a href="{{ url(step.url) }}" class="flex-1 rounded p-2
             {% if craft.app.request.pathInfo == step.url %}
             focus:outline-none
             {% else %}
             {% if not currentOrNext %} text-gray-400 {% endif %}hover:text-gray-900
             {% endif %}
      ">{{ step.label }}</a>
            {% if not loop.last %}<span class="flex-1 p-2">&rarr;</span>{% endif %}
        {% endfor %}
    </nav>
    <div class="h-1 bg-blue-600 -mt-1 rounded-bl" style="width:{{ width }}%;"></div>
</nav>